import{r as a,u as k,S as P,b as C,j as e,a as p,y as o}from"./index-HS-0_6p7.js";import{R}from"./ReceiptSuccessModal-Cf_yqeK_.js";import{H as U}from"./Helmet-BQrkXuiA.js";import{c as I}from"./createLucideIcon-BekIGk2A.js";import"./index-BTT9Qpdf.js";import"./index-hTSXAHiY.js";import"./proxy-4A12_6Dc.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],V=I("cloud-upload",E);function q(){const[s,m]=a.useState(null),[D,L]=a.useState(""),[u,x]=a.useState(""),[h,y]=a.useState(""),[g,f]=a.useState(0);let{id:r}=k();const[b,j]=a.useState(!1),N=()=>{j(!0)},{backendurl:l}=a.useContext(P);let S=async()=>{const t=await p.post(`${l}/api/order/find-order`,{id:r});console.log("fetch order",t),t.data.success?(x(t.data.order.customerInfo.name),y(t.data.order.customerInfo.phone),f(t.data.order.totalPrice),console.log(t)):o.error("Failed to fetch order details.")};a.useEffect(()=>{S()},[]);const w=async t=>{if(t.preventDefault(),!s){o.error("Please upload your receipt.");return}const n=new FormData;n.append("receipt",s),n.append("id",r);const d=await p.post(`${l}/api/order/upload-receipt`,n);console.log(d),d.data.success?(o.success("Receipt uploaded successfully!"),N()):o.error("oopps something went wrong")},[c,i]=a.useState(!1),v=C();return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx("title",{children:"Verify Payment | Yegna Shop"}),e.jsx("meta",{name:"description",content:"Upload your bank receipt to verify your payment for your Yegna Shop order."}),e.jsx("meta",{property:"og:title",content:"Verify Payment | Yegna Shop"}),e.jsx("meta",{property:"og:description",content:"Upload your bank receipt to verify your payment for your Yegna Shop order."})]}),e.jsxs("div",{className:"max-w-xl mx-auto mt-16 bg-white rounded-2xl shadow-lg p-8 border border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"ðŸ§¾ Payment Verification"}),e.jsxs("div",{className:"mb-6 space-y-1",children:[e.jsx("p",{className:"text-gray-500",children:"Order ID:"}),e.jsx("p",{className:"font-semibold text-gray-800 bg-gray-100 p-2 rounded-md",children:r}),e.jsx("p",{className:"text-gray-500",children:" Name:"}),e.jsx("p",{className:"font-semibold text-gray-800 bg-gray-100 p-2 rounded-md",children:u}),e.jsx("p",{className:"text-gray-500",children:"Phone:"}),e.jsxs("p",{className:"font-semibold text-gray-800 bg-gray-100 p-2 rounded-md",children:["+251 ",h]}),e.jsx("p",{className:"text-gray-500",children:"Total Amount:"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["ETB"," "," ",g]})]}),e.jsxs("form",{onSubmit:async t=>{i(!0),await w(t),i(!1)},className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Upload Bank Receipt"}),e.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition",children:[s?e.jsx("img",{src:URL.createObjectURL(s),alt:"receipt"}):e.jsx(V,{className:"mx-auto text-blue-500 mb-3",size:40}),e.jsx("p",{className:"text-gray-500 mb-2",children:s?s.name:"Click or drag to upload receipt"}),e.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:t=>m(t.target.files[0]),className:"absolute inset-0 opacity-0 cursor-pointer"})]})]}),e.jsxs("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded-lg transition flex items-center justify-center",disabled:c,children:[c&&e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),c?"Submitting...":"Submit for Verification"]})]}),e.jsx("div",{children:e.jsx(R,{p1:"We received your receipt and will get back to you soon.",p2:"Thank you for your patience!",show:b,onClose:()=>{localStorage.removeItem("yegna_cart"),localStorage.removeItem("order"),v("/"),location.reload()}})})]})]})}export{q as default};
