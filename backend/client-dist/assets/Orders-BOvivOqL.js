import{r as a,S as b,A as w,j as e,a as O,y as C}from"./index-D_AtKwXT.js";import{H as F}from"./Helmet-C63Otn-q.js";import{i as E,f as j,h as S,j as k,k as A,g as h,l as B,m as R,n as T,o as _}from"./index-Cf-NmoxF.js";import{m as D}from"./proxy-B03JueXb.js";const H={pending_verification:{icon:e.jsx(_,{}),text:"Pending Verification",color:"text-yellow-600"},completed:{icon:e.jsx(T,{}),text:"Order Completed",color:"text-green-600"},cancelled:{icon:e.jsx(R,{}),text:"Order Cancelled",color:"text-red-600"},processing:{icon:e.jsx(B,{}),text:"Processing Order",color:"text-blue-500"},shipping:{icon:e.jsx(h,{}),text:"Shipping in Progress",color:"text-indigo-600"},out_for_delivery:{icon:e.jsx(h,{}),text:"Out for Delivery",color:"text-purple-500"},delivered:{icon:e.jsx(A,{}),text:"Delivered",color:"text-green-700"},returned:{icon:e.jsx(k,{}),text:"Returned",color:"text-red-500"},refunded:{icon:e.jsx(j,{}),text:"Refunded",color:"text-emerald-600"}},V=()=>{const{backendurl:u}=a.useContext(b),{token:f}=a.useContext(w),[o,g]=a.useState([]),[y,v]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const s=await O.post(`${u}/api/cart/get`,{},{headers:{token:f}});g((s.data.order||[]).reverse()),console.log(s)}catch(s){console.log(s),C.error("Failed to fetch orders")}finally{v(!1)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(F,{children:[e.jsx("title",{children:"My Orders | E-commerce"}),e.jsx("meta",{name:"description",content:"View your recent orders, order status, and receipts on your E-commerce account."})]}),e.jsxs("div",{className:"min-h-screen bg-gray-50 px-4 sm:px-8 py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-800 pas pacifico-regular",children:"ðŸ“¦ My Orders"}),y?e.jsx("div",{className:"text-center text-gray-500",children:"Loading orders..."}):o.length===0?e.jsx("div",{className:"text-center text-gray-500 mt-20 text-sm",children:"No orders found."}):e.jsx("div",{className:"space-y-8",children:o.map((t,s)=>{const c=H[t.status]||{};return e.jsxs(D.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.4,delay:s*.1},className:"bg-white rounded-xl shadow-md p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-y-2 mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{}),new Date(t.createdAt).toLocaleString()]}),e.jsxs("div",{className:"text-xs mt-1",children:["Order ID: ",t._id.slice(-8)]})]}),e.jsxs("div",{className:`flex items-center gap-2 font-semibold ${c.color}`,children:[c.icon,e.jsx("span",{children:c.text})]})]}),e.jsx("div",{className:"space-y-4 border-t pt-4",children:t.cart.map((r,N)=>{var l,x,d,m,p;return e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-4 items-start sm:items-center",children:[e.jsx("img",{src:(x=(l=r.product)==null?void 0:l.images)==null?void 0:x[0],alt:(d=r.product)==null?void 0:d.name,className:"w-16 h-16 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700 flex-1",children:[e.jsx("div",{className:"font-medium",children:(m=r.product)==null?void 0:m.name}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["Qty: ",r.quantity]}),r.variant&&Object.entries(r.variant).map(([n,i])=>e.jsxs("span",{className:"text-xs text-gray-500",children:[" ","| ",n.charAt(0).toUpperCase()+n.slice(1),":"," ",i==null?void 0:i.value]},n))]}),e.jsxs("div",{className:"text-gray-700 font-semibold text-sm whitespace-nowrap",children:["ETB ",(p=r.product)==null?void 0:p.price]})]},N)})}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center text-sm text-gray-600 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{}),e.jsxs("span",{className:"font-medium",children:["Total: ETB ",t.totalPrice]})]}),t.receiptUrl&&e.jsxs("a",{href:t.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[e.jsx(S,{}),"View Receipt"]})]})]},s)})})]})]})};export{V as default};
