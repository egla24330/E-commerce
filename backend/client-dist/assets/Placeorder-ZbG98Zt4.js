import{r as n,S as P,j as e,A as I,b as M,F as H,f as W,g as R,h as S,i as _,y as m,a as K}from"./index-BQSgFZ4m.js";import{f as U,g as V,h as Y}from"./index-Cbnh4brd.js";import{a as g}from"./assets-nNy7GWIk.js";import{T as G}from"./triangle-alert-DAaA76oe.js";import{H as J}from"./Helmet-3N7p5rxb.js";import{C as Q}from"./ClipLoader-DauM1FJ0.js";const X=()=>{const{getCartAmount:x,delivery_fee:f,currency:t,getCartTotal:u}=n.useContext(P),h=u(),y=h===0?"0.00":(h+f).toFixed(2);return e.jsx("div",{className:"w-full mt-8 px-1 text-sm text-gray-800",children:e.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"text-green-500"}),e.jsx("span",{children:"Subtotal"})]}),e.jsxs("span",{children:[t," ",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"text-blue-500"}),e.jsx("span",{children:"Shipping"})]}),e.jsxs("span",{children:[t," ",f.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-semibold text-base",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"text-indigo-600"}),e.jsx("span",{children:"Total"})]}),e.jsxs("span",{children:[t," ",y]})]})]})})},Z=()=>e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Please transfer the total amount to one of the following bank accounts:"}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:g.CBE_SA,alt:"Bank 1 Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"commercial bank of ethiopia"}),e.jsx("p",{className:"font-semibold text-lg",children:"1234 5678 9012"})]})]}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:g.coop,alt:"Bank 2 Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Cooperative Bank of Oromia"}),e.jsx("p",{className:"font-semibold text-lg",children:"9876 5432 1098"})]})]}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:g.absiniya,alt:"Bank 3 Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Bank of Absiniya "}),e.jsx("p",{className:"font-semibold text-lg",children:"4567 8901 2345"})]})]}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:g.Awash,alt:"Bank 4 Logo",className:"w-14 h-14 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Awash Bank"}),e.jsx("p",{className:"font-semibold text-lg",children:"1122 3344 5566"})]})]})]});function ee(){return e.jsxs("div",{className:"border-red-500 bg-red-50 text-red-800 p-4 mb-5 flex items-center",children:[e.jsx(G,{className:"mr-2 h-6 w-6"}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-semibold",children:"Important Note Regarding Bank Transfers"}),e.jsxs("p",{className:"mt-1 text-sm leading-relaxed",children:["Please ensure that the ",e.jsx("strong",{className:"font-semibold",children:"name of the account holder"})," used for the bank transfer ",e.jsx("strong",{className:"font-semibold",children:"exactly matches the name you provided in your order form"}),"."]}),e.jsx("p",{className:"text-sm leading-relaxed",children:"Discrepancies between the names on the transfer receipt and your order details may lead to delays in processing your order or even cancellation."}),e.jsx("p",{className:"text-sm leading-relaxed",children:"To avoid any issues, double-check the beneficiary name and account details before making the transfer."})]})]})}const de=()=>{const[x,f]=n.useState(!0),[t,u]=n.useState({}),[h,y]=n.useState({}),{getCartTotal:E,currency:se,delivery_fee:T,cartItems:j,backendurl:F}=n.useContext(P),{token:L}=n.useContext(I),[N,k]=n.useState(!1),[w,C]=n.useState(!1),[A,re]=n.useState(E()+T),[i,v]=n.useState(""),$=M(),[l,q]=n.useState({name:"",email:"",address:"",deliveryArea:"addis",subCity:"",city:"",deliveryLocation:"",phone:""}),b=(a,s)=>{let r="";switch(a){case"name":s.trim()?s.trim().length<3&&(r="Name must be at least 3 characters"):r="Name is required";break;case"email":s?/^\S+@\S+\.\S+$/.test(s)||(r="Invalid email format"):r="Email is required";break;case"address":s.trim()||(r="Address is required");break;case"phone":s?/^\d{9}$/.test(s)||(r="Phone must be 9 digits"):r="Phone is required";break;case"subCity":x&&!s&&(r="Sub-city is required");break;case"city":!x&&!s.trim()&&(r="City is required");break;case"deliveryLocation":s.trim()||(r="Delivery location is required");break}return r},D=()=>{const a={};let s=!0;if(Object.entries(l).forEach(([r,p])=>{const o=b(r,p);o&&(a[r]=o,s=!1)}),x){const r=b("subCity",l.subCity);r&&(a.subCity=r,s=!1)}else{const r=b("city",l.city);r&&(a.city=r,s=!1)}return u(a),s},d=a=>{const{name:s,value:r}=a.target;if(!(s==="phone"&&(!/^\d*$/.test(r)||r.length>9))&&(B(a),h[s])){const p=b(s,r);u(o=>({...o,[s]:p}))}},c=a=>{const{name:s,value:r}=a.target;y(o=>({...o,[s]:!0}));const p=b(s,r);u(o=>({...o,[s]:p}))},O=a=>{const s=a.target.value;f(s==="addis"),B({target:{name:"deliveryArea",value:s}})},B=a=>{q({...l,[a.target.name]:a.target.value})},z=async a=>{if(a.preventDefault(),!D()){window.scrollTo({top:0,behavior:"smooth"}),m.error("Please fill in all required fields correctly");return}if(i===""){m.error("Please select a payment method");return}if(i==="telebirr"){m.error("Telebirr payment method is not available yet. Please try Bank.");return}if(i==="cod"){m.error("Cash on delivery is not available yet. Please try Bank.");return}try{k(!0),console.log({form:l,paymentMethod:i,cartItems:j,totalPrice:A}),console.log("cart",j);const s=await K.post(`${F}/api/order/add`,{form:l,paymentMethod:i,cartItems:j,totalPrice:A},{headers:{token:L}});s.data.success?(m.success("Order placed successfully"),$("/verify-payment/"+s.data.order),console.log(s.data),console.log("order id",s.data.order),localStorage.setItem("order",s.data.order)):m.error("opps unauthorized please login again")}catch(s){m.error("Error placing order"),console.error(s.message)}finally{k(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx("title",{children:"Place Order | E-commerce"}),e.jsx("meta",{name:"description",content:"Place your order and provide delivery details for your E-commerce purchase."}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx("form",{className:`${w?"filter blur-lg bg-opacity-50":""}`,children:e.jsxs("div",{className:"min-h-screen px-4 sm:px-10 py-10 text-sm",children:[e.jsx("h1",{className:"text-xl font-semibold mb-6 text-gray-800 pacifico-regular",children:"ðŸšš Delivery Information"}),e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg py-6 px-4 md:px-6 space-y-5 border border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(H,{size:18})}),e.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:l.name,onChange:d,onBlur:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.name?"border-red-500 focus:ring-red-200":"border-gray-700 focus:ring-black"} transition-colors`,required:!0}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(W,{size:18})}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:l.email,onChange:d,onBlur:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.email?"border-red-500 focus:ring-red-200":"border-gray-700 focus:ring-black"} transition-colors`,required:!0}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.email})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(R,{size:18})}),e.jsx("input",{type:"text",name:"address",placeholder:"Full Address",value:l.address,onChange:d,onBlur:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.address?"border-red-500 focus:ring-red-200":"border-gray-700 focus:ring-black"} transition-colors`,required:!0}),t.address&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Delivery Area"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"deliveryArea",value:l.deliveryArea||"addis",onChange:O,className:"w-full pl-3 pr-10 py-3 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-black appearance-none bg-white",children:[e.jsx("option",{value:"addis",children:"Addis Ababa"}),e.jsx("option",{value:"outside",children:"Outside Addis Ababa"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400",children:e.jsx(S,{size:20})})]})]}),x?e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Sub-city"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"subCity",value:l.subCity||"",onChange:d,onBlur:c,className:`w-full pl-3 pr-10 py-3 border rounded-lg focus:outline-none focus:ring-2 appearance-none bg-white ${t.subCity?"border-red-500 focus:ring-red-200":"border-gray-700 focus:ring-black"}`,children:[e.jsx("option",{value:"",children:"-- Select Sub-city --"}),e.jsx("option",{value:"bole",children:"Bole"}),e.jsx("option",{value:"kirkos",children:"Kirkos"}),e.jsx("option",{value:"yeka",children:"Yeka"}),e.jsx("option",{value:"lideta",children:"Lideta"}),e.jsx("option",{value:"gulele",children:"Gulele"}),e.jsx("option",{value:"lafto",children:"Nifas Silk-Lafto"}),e.jsx("option",{value:"akaki",children:"Akaki Kality"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400",children:e.jsx(S,{size:20})})]}),t.subCity&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.subCity})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"City"}),e.jsx("input",{type:"text",name:"city",placeholder:"Enter your city",value:l.city,onChange:d,onBlur:c,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.city?"border-red-500 focus:ring-red-200":"border-gray-700 focus:ring-black"} transition-colors`,required:!0}),t.city&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Delivery Location Details"}),e.jsx("input",{type:"text",name:"deliveryLocation",placeholder:"House number, landmark, or specific instructions",value:l.deliveryLocation,onChange:d,onBlur:c,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.deliveryLocation?"border-red-500 focus:ring-red-200":"border-gray-700 focus:ring-black"} transition-colors`,required:!0}),t.deliveryLocation&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.deliveryLocation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Phone Number"}),e.jsxs("div",{className:`flex items-center rounded-lg border-2 transition-colors ${t.phone?"border-red-500":"border-gray-700 focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center px-3 border-r border-gray-700 h-full",children:[e.jsx(_,{className:"text-gray-500 mr-2",size:18}),e.jsx("span",{className:"text-gray-700 font-bold",children:"+251"})]}),e.jsx("input",{type:"tel",name:"phone",placeholder:"912345678",value:l.phone,onChange:d,onBlur:c,className:"w-full p-3 outline-none font-medium",maxLength:9,required:!0})]}),t.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.phone}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter 9-digit phone number without prefix"})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 space-y-4 border border-gray-200 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"ðŸ§¾ Order Summary"}),e.jsx(X,{}),e.jsx("p",{children:"SELECT PAYMENT METHOD"}),e.jsxs("div",{className:"flex gap-3 flex-col lg:flex-row lg:items-center p-2",children:[e.jsx("div",{onClick:()=>v("telebirr"),className:`px-6 py-2 cursor-pointer rounded-md hover:bg-gray-100 transition-colors ${i==="telebirr"?"bg-gray-300":"border border-black"}`,children:e.jsx("img",{className:"h-6",src:g.tele,alt:"telebirr icon"})}),e.jsx("div",{onClick:()=>{C(!0),v("bank"),window.scrollTo(0,-4e3)},className:`px-6 py-2 cursor-pointer rounded-md hover:bg-gray-100 transition-colors ${i==="bank"?"bg-gray-300":"border border-black"}`,children:e.jsx("p",{className:"text-gray-700 font-bold",children:"Bank"})}),e.jsx("div",{onClick:()=>v("cod"),className:`px-6 py-2 cursor-pointer rounded-md hover:bg-gray-100 transition-colors ${i==="cod"?"bg-gray-300":"border border-black"}`,children:e.jsx("p",{className:"text-gray-700 font-bold",children:"COD"})})]}),i==="telebirr"&&e.jsx("p",{className:"text-red-500 text-md font-bold",children:"Telebirr payment method is not available yet. Please try Bank!"}),i==="cod"&&e.jsx("p",{className:"text-red-500 text-md font-bold",children:"Cash on delivery is not available yet. Please try Bank!"}),i==="bank"&&e.jsx("div",{className:"flex flex-col gap-4 mt-4",children:e.jsx(Z,{})}),e.jsx("div",{className:"flex items-center justify-end mt-4",children:e.jsx("button",{onClick:z,disabled:N,className:"px-2 mt-4 bg-black hover:bg-black text-white py-2 rounded-md font-medium transition w-[100px]",children:N?e.jsx(Q,{size:20,color:"#fff"}):i==="bank"?"Verify":"Place Order"})})]})]})]})}),w&&e.jsx("div",{className:"max-w-4xl mx-auto absolute top-40 left-0 right-0 flex",children:e.jsxs("div",{children:[e.jsx(ee,{}),e.jsx("button",{onClick:()=>C(!1),className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-md font-medium transition w-[300px] mt-4 mx-auto",children:"Understand and Will Proceed"})]})})]})};export{de as default};
