import{r as a,S as N,A as v,j as e,a as b,y as w}from"./index-DazIH8Dn.js";import{i as C,f as O,h as E,j as F,k as A,l as S}from"./index-jIl8iYBE.js";import{H as k}from"./Helmet-kjh3hzmB.js";import{m as T}from"./proxy-CS_Y8pSq.js";const B={pending_verification:{icon:e.jsx(S,{}),text:"Pending Verification",color:"text-yellow-600"},completed:{icon:e.jsx(A,{}),text:"Order Completed",color:"text-green-600"},cancelled:{icon:e.jsx(F,{}),text:"Order Cancelled",color:"text-red-600"}},V=()=>{const{backendurl:h}=a.useContext(N),{token:j}=a.useContext(v),[l,f]=a.useState([]),[g,u]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const t=await b.post(`${h}/api/cart/get`,{},{headers:{token:j}});f((t.data.order||[]).reverse()),console.log(t)}catch(t){console.log(t),w.error("Failed to fetch orders")}finally{u(!1)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx("title",{children:"My Orders | E-commerce"}),e.jsx("meta",{name:"description",content:"View your recent orders, order status, and receipts on your E-commerce account."})]}),e.jsxs("div",{className:"min-h-screen bg-gray-50 px-4 sm:px-8 py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-800 pas pacifico-regular",children:"ðŸ“¦ My Orders"}),g?e.jsx("div",{className:"text-center text-gray-500",children:"Loading orders..."}):l.length===0?e.jsx("div",{className:"text-center text-gray-500 mt-20 text-sm",children:"No orders found."}):e.jsx("div",{className:"space-y-8",children:l.map((s,t)=>{const c=B[s.status]||{};return e.jsxs(T.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.4,delay:t*.1},className:"bg-white rounded-xl shadow-md p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-y-2 mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{}),new Date(s.createdAt).toLocaleString()]}),e.jsxs("div",{className:"text-xs mt-1",children:["Order ID: ",s._id.slice(-8)]})]}),e.jsxs("div",{className:`flex items-center gap-2 font-semibold ${c.color}`,children:[c.icon,e.jsx("span",{children:c.text})]})]}),e.jsx("div",{className:"space-y-4 border-t pt-4",children:s.cart.map((r,y)=>{var o,d,x,m,p;return e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-4 items-start sm:items-center",children:[e.jsx("img",{src:(d=(o=r.product)==null?void 0:o.images)==null?void 0:d[0],alt:(x=r.product)==null?void 0:x.name,className:"w-16 h-16 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700 flex-1",children:[e.jsx("div",{className:"font-medium",children:(m=r.product)==null?void 0:m.name}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["Qty: ",r.quantity]}),r.variant&&Object.entries(r.variant).map(([n,i])=>e.jsxs("span",{className:"text-xs text-gray-500",children:[" ","| ",n.charAt(0).toUpperCase()+n.slice(1),":"," ",i==null?void 0:i.value]},n))]}),e.jsxs("div",{className:"text-gray-700 font-semibold text-sm whitespace-nowrap",children:["ETB ",(p=r.product)==null?void 0:p.price]})]},y)})}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center text-sm text-gray-600 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{}),e.jsxs("span",{className:"font-medium",children:["Total: ETB ",s.totalPrice]})]}),s.receiptUrl&&e.jsxs("a",{href:s.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[e.jsx(E,{}),"View Receipt"]})]})]},t)})})]})]})};export{V as default};
