import{r as a,S as N,A as b,j as e,a as O,y as C}from"./index-BugsvrNR.js";import{H as E}from"./Helmet-DFmxu0cw.js";import{i as F,f as u,h as k,j as S,k as _,g as j,l as A,m as B,n as M,o as R}from"./index-5zEzFdcU.js";import{m as T}from"./proxy-BY9zQ1F-.js";const V={pending_verification:{icon:e.jsx(R,{}),text:"Pending Verification",color:"text-yellow-600"},completed:{icon:e.jsx(M,{}),text:"Order Completed",color:"text-green-600"},cancelled:{icon:e.jsx(B,{}),text:"Order Cancelled",color:"text-red-600"},processing:{icon:e.jsx(A,{}),text:"Processing Order",color:"text-blue-500"},shipping:{icon:e.jsx(j,{}),text:"Shipping in Progress",color:"text-indigo-600"},out_for_delivery:{icon:e.jsx(j,{}),text:"Out for Delivery",color:"text-purple-500"},delivered:{icon:e.jsx(_,{}),text:"Delivered",color:"text-green-700"},returned:{icon:e.jsx(S,{}),text:"Returned",color:"text-red-500"},refunded:{icon:e.jsx(u,{}),text:"Refunded",color:"text-emerald-600"}},L=()=>{const{backendurl:g}=a.useContext(N),{token:h}=a.useContext(b),[i,y]=a.useState([]),[f,w]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const s=await O.post(`${g}/api/cart/get`,{},{headers:{token:h}});y((s.data.order||[]).reverse()),console.log(s)}catch(s){console.log(s),C.error("Failed to fetch orders")}finally{w(!1)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsx("title",{children:"My Orders | E-commerce"}),e.jsx("meta",{name:"description",content:"View your recent orders, order status, and receipts on your E-commerce account."}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("meta",{property:"og:title",content:"My Orders | E-commerce"}),e.jsx("meta",{property:"og:description",content:"View your recent orders, order status, and receipts on your E-commerce account."}),e.jsx("meta",{property:"og:url",content:"https://www.zaycommerce.com/orders"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:image",content:"https://www.zaycommerce.com/logo.png"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:"My Orders | E-commerce"}),e.jsx("meta",{name:"twitter:description",content:"View your recent orders, order status, and receipts on your E-commerce account."}),e.jsx("link",{rel:"canonical",href:"https://www.zaycommerce.com/orders"})]}),e.jsxs("div",{className:"min-h-screen bg-gray-50 px-4 sm:px-8 py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-800 pas pacifico-regular",children:"ðŸ“¦ My Orders"}),f?e.jsx("div",{className:"text-center text-gray-500",children:"Loading orders..."}):i.length===0?e.jsx("div",{className:"text-center text-gray-500 mt-20 text-sm",children:"No orders found."}):e.jsx("div",{className:"space-y-8",children:i.map((t,s)=>{const o=V[t.status]||{};return e.jsxs(T.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.4,delay:s*.1},className:"bg-white rounded-xl shadow-md p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-y-2 mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{}),new Date(t.createdAt).toLocaleString()]}),e.jsxs("div",{className:"text-xs mt-1",children:["Order ID: ",t._id.slice(-8)]})]}),e.jsxs("div",{className:`flex items-center gap-2 font-semibold ${o.color}`,children:[o.icon,e.jsx("span",{children:o.text})]})]}),e.jsx("div",{className:"space-y-4 border-t pt-4",children:t.cart.map((r,v)=>{var l,d,x,m,p;return e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-4 items-start sm:items-center",children:[e.jsx("img",{src:(d=(l=r.product)==null?void 0:l.images)==null?void 0:d[0],alt:(x=r.product)==null?void 0:x.name,className:"w-16 h-16 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700 flex-1",children:[e.jsx("div",{className:"font-medium",children:(m=r.product)==null?void 0:m.name}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["Qty: ",r.quantity]}),r.variant&&Object.entries(r.variant).map(([c,n])=>e.jsxs("span",{className:"text-xs text-gray-500",children:[" ","| ",c.charAt(0).toUpperCase()+c.slice(1),":"," ",n==null?void 0:n.value]},c))]}),e.jsxs("div",{className:"text-gray-700 font-semibold text-sm whitespace-nowrap",children:["ETB ",(p=r.product)==null?void 0:p.price]})]},v)})}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center text-sm text-gray-600 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{}),e.jsxs("span",{className:"font-medium",children:["Total: ETB ",t.totalPrice]})]}),t.receiptUrl&&e.jsxs("a",{href:t.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[e.jsx(k,{}),"View Receipt"]})]})]},s)})})]})]})};export{L as default};
