import{r as o,S as E,j as e,A as O,b as W,y as x,a as H}from"./index-HS-0_6p7.js";import{d as R,e as V,f as G,G as f}from"./index-BTT9Qpdf.js";import{a as b}from"./assets-TWkSWQyk.js";import{T as Y}from"./triangle-alert-YmQMP5ds.js";import{H as _}from"./Helmet-BQrkXuiA.js";import{C as K}from"./ClipLoader-BU5QXpBz.js";import"./createLucideIcon-BekIGk2A.js";const U=()=>{const{getCartAmount:n,delivery_fee:y,currency:t,getCartTotal:u}=o.useContext(E),h=u(),j=h===0?"0.00":(h+y).toFixed(2);return e.jsx("div",{className:"w-full mt-8 px-1 text-sm text-gray-800",children:e.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"text-green-500"}),e.jsx("span",{children:"Subtotal"})]}),e.jsxs("span",{children:[t," ",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"text-blue-500"}),e.jsx("span",{children:"Shipping"})]}),e.jsxs("span",{children:[t," ",y.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 font-semibold text-base",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"text-indigo-600"}),e.jsx("span",{children:"Total"})]}),e.jsxs("span",{children:[t," ",j]})]})]})})},J=()=>e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Please transfer the total amount to one of the following bank accounts:"}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:b.CBE_SA,alt:"Bank 1 Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"commercial bank of ethiopia"}),e.jsx("p",{className:"font-semibold text-lg",children:"1234 5678 9012"})]})]}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:b.coop,alt:"Bank 2 Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Cooperative Bank of Oromia"}),e.jsx("p",{className:"font-semibold text-lg",children:"9876 5432 1098"})]})]}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:b.absiniya,alt:"Bank 3 Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Bank of Absiniya "}),e.jsx("p",{className:"font-semibold text-lg",children:"4567 8901 2345"})]})]}),e.jsxs("div",{className:"border rounded-xl p-4 shadow bg-white flex items-center gap-4",children:[e.jsx("img",{src:b.Awash,alt:"Bank 4 Logo",className:"w-14 h-14 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Awash Bank"}),e.jsx("p",{className:"font-semibold text-lg",children:"1122 3344 5566"})]})]})]});function Q(){return e.jsxs("div",{className:"border-red-500 bg-red-50 text-red-800 p-4 mb-5 flex items-center",children:[e.jsx(Y,{className:"mr-2 h-6 w-6"}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-semibold",children:"Important Note Regarding Bank Transfers"}),e.jsxs("p",{className:"mt-1 text-sm leading-relaxed",children:["Please ensure that the ",e.jsx("strong",{className:"font-semibold",children:"name of the account holder"})," used for the bank transfer ",e.jsx("strong",{className:"font-semibold",children:"exactly matches the name you provided in your order form"}),"."]}),e.jsx("p",{className:"text-sm leading-relaxed",children:"Discrepancies between the names on the transfer receipt and your order details may lead to delays in processing your order or even cancellation."}),e.jsx("p",{className:"text-sm leading-relaxed",children:"To avoid any issues, double-check the beneficiary name and account details before making the transfer."})]})]})}function S(n){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function X(n){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(n)}function Z(n){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(n)}function ee(n){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(n)}function re(n){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}const me=()=>{const[n,y]=o.useState(!0),[t,u]=o.useState({}),[h,j]=o.useState({}),{getCartTotal:P,currency:se,delivery_fee:T,cartItems:N,backendurl:F}=o.useContext(E),{token:$}=o.useContext(O),[k,w]=o.useState(!1),[C,B]=o.useState(!1),[A,te]=o.useState(P()+T),[l,v]=o.useState(""),q=W(),[i,z]=o.useState({name:"",email:"",address:"",deliveryArea:"addis",subCity:"",city:"",deliveryLocation:"",phone:""}),p=(a,r)=>{let s="";switch(a){case"name":r.trim()?r.trim().length<3&&(s="Name must be at least 3 characters"):s="Name is required";break;case"email":r?/^\S+@\S+\.\S+$/.test(r)||(s="Invalid email format"):s="Email is required";break;case"address":r.trim()||(s="Address is required");break;case"phone":r?/^\d{9}$/.test(r)||(s="Phone must be 9 digits"):s="Phone is required";break;case"subCity":n&&!r&&(s="Sub-city is required");break;case"city":!n&&!r.trim()&&(s="City is required");break;case"deliveryLocation":r.trim()||(s="Delivery location is required");break}return s},M=()=>{const a={};let r=!0;if(Object.entries(i).forEach(([s,g])=>{const d=p(s,g);d&&(a[s]=d,r=!1)}),n){const s=p("subCity",i.subCity);s&&(a.subCity=s,r=!1)}else{const s=p("city",i.city);s&&(a.city=s,r=!1)}return u(a),r},c=a=>{const{name:r,value:s}=a.target;if(!(r==="phone"&&(!/^\d*$/.test(s)||s.length>9))&&(L(a),h[r])){const g=p(r,s);u(d=>({...d,[r]:g}))}},m=a=>{const{name:r,value:s}=a.target;j(d=>({...d,[r]:!0}));const g=p(r,s);u(d=>({...d,[r]:g}))},D=a=>{const r=a.target.value;y(r==="addis"),L({target:{name:"deliveryArea",value:r}})},L=a=>{z({...i,[a.target.name]:a.target.value})},I=async a=>{if(a.preventDefault(),!M()){window.scrollTo({top:0,behavior:"smooth"}),x.error("Please fill in all required fields correctly");return}if(l===""){x.error("Please select a payment method");return}if(l==="telebirr"){x.error("Telebirr payment method is not available yet. Please try Bank.");return}if(l==="cod"){x.error("Cash on delivery is not available yet. Please try Bank.");return}try{w(!0),console.log({form:i,paymentMethod:l,cartItems:N,totalPrice:A});const r=await H.post(`${F}/api/order/add`,{form:i,paymentMethod:l,cartItems:N,totalPrice:A},{headers:{token:$}});r.data.success?(x.success("Order placed successfully"),q("/verify-payment/"+r.data.order),console.log(r.data),console.log("order id",r.data.order),localStorage.setItem("order",r.data.order)):x.error("opps unauthorized please login again")}catch(r){x.error("Error placing order"),console.error(r.message)}finally{w(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsx("title",{children:"Place Order | E-commerce"}),e.jsx("meta",{name:"description",content:"Place your order and provide delivery details for your E-commerce purchase."}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx("form",{className:`${C?"filter blur-lg bg-opacity-50":""}`,children:e.jsxs("div",{className:"min-h-screen px-4 sm:px-10 py-10 text-sm",children:[e.jsx("h1",{className:"text-xl font-semibold mb-6 text-gray-800 pacifico-regular",children:"ðŸšš Delivery Information"}),e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg py-6 px-4 md:px-6 space-y-5 border border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(re,{size:18})}),e.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:i.name,onChange:c,onBlur:m,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.name?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"} transition-colors`,required:!0}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(X,{size:18})}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:i.email,onChange:c,onBlur:m,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.email?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"} transition-colors`,required:!0}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.email})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(Z,{size:18})}),e.jsx("input",{type:"text",name:"address",placeholder:"Full Address",value:i.address,onChange:c,onBlur:m,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.address?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"} transition-colors`,required:!0}),t.address&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Delivery Area"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"deliveryArea",value:i.deliveryArea||"addis",onChange:D,className:"w-full pl-3 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-200 appearance-none bg-white",children:[e.jsx("option",{value:"addis",children:"Addis Ababa"}),e.jsx("option",{value:"outside",children:"Outside Addis Ababa"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400",children:e.jsx(S,{size:20})})]})]}),n?e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Sub-city"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"subCity",value:i.subCity||"",onChange:c,onBlur:m,className:`w-full pl-3 pr-10 py-3 border rounded-lg focus:outline-none focus:ring-2 appearance-none bg-white ${t.subCity?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,children:[e.jsx("option",{value:"",children:"-- Select Sub-city --"}),e.jsx("option",{value:"bole",children:"Bole"}),e.jsx("option",{value:"kirkos",children:"Kirkos"}),e.jsx("option",{value:"yeka",children:"Yeka"}),e.jsx("option",{value:"lideta",children:"Lideta"}),e.jsx("option",{value:"gulele",children:"Gulele"}),e.jsx("option",{value:"lafto",children:"Nifas Silk-Lafto"}),e.jsx("option",{value:"akaki",children:"Akaki Kality"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400",children:e.jsx(S,{size:20})})]}),t.subCity&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.subCity})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"City"}),e.jsx("input",{type:"text",name:"city",placeholder:"Enter your city",value:i.city,onChange:c,onBlur:m,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.city?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"} transition-colors`,required:!0}),t.city&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Delivery Location Details"}),e.jsx("input",{type:"text",name:"deliveryLocation",placeholder:"House number, landmark, or specific instructions",value:i.deliveryLocation,onChange:c,onBlur:m,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 ${t.deliveryLocation?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"} transition-colors`,required:!0}),t.deliveryLocation&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.deliveryLocation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Phone Number"}),e.jsxs("div",{className:`flex items-center rounded-lg border-2 transition-colors ${t.phone?"border-red-500":"border-gray-300 focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center px-3 border-r border-gray-300 h-full",children:[e.jsx(ee,{className:"text-gray-500 mr-2",size:18}),e.jsx("span",{className:"text-gray-700 font-bold",children:"+251"})]}),e.jsx("input",{type:"tel",name:"phone",placeholder:"912345678",value:i.phone,onChange:c,onBlur:m,className:"w-full p-3 outline-none font-medium",maxLength:9,required:!0})]}),t.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:t.phone}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter 9-digit phone number without prefix"})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 space-y-4 border border-gray-200 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"ðŸ§¾ Order Summary"}),e.jsx(U,{}),e.jsx("p",{children:"SELECT PAYMENT METHOD"}),e.jsxs("div",{className:"flex gap-3 flex-col lg:flex-row lg:items-center p-2",children:[e.jsx("div",{onClick:()=>v("telebirr"),className:`p-3 cursor-pointer rounded-md hover:bg-gray-100 transition-colors ${l==="telebirr"?"bg-gray-300":"border border-gray-200"}`,children:e.jsx("img",{className:"h-6",src:b.tele,alt:"telebirr icon"})}),e.jsx("div",{onClick:()=>{B(!0),v("bank"),window.scrollTo(0,-4e3)},className:`p-3 cursor-pointer rounded-md hover:bg-gray-100 transition-colors ${l==="bank"?"bg-gray-300":"border border-gray-200"}`,children:e.jsx("p",{className:"text-gray-700 font-bold",children:"Bank"})}),e.jsx("div",{onClick:()=>v("cod"),className:`p-3 cursor-pointer rounded-md hover:bg-gray-100 transition-colors ${l==="cod"?"bg-gray-300":"border border-gray-200"}`,children:e.jsx("p",{className:"text-gray-700 font-bold",children:"CASH ON DELIVERY"})})]}),l==="telebirr"&&e.jsx("p",{className:"text-red-500 text-md font-bold",children:"Telebirr payment method is not available yet. Please try Bank!"}),l==="cod"&&e.jsx("p",{className:"text-red-500 text-md font-bold",children:"Cash on delivery is not available yet. Please try Bank!"}),l==="bank"&&e.jsx("div",{className:"flex flex-col gap-4 mt-4",children:e.jsx(J,{})}),e.jsx("div",{className:"flex items-center justify-end mt-4",children:e.jsx("button",{onClick:I,disabled:k,className:"px-2 mt-4 bg-green-600 hover:bg-green-700 text-white py-2 rounded-md font-medium transition w-[100px]",children:k?e.jsx(K,{size:20,color:"#fff"}):l==="bank"?"Verify":"Place Order"})})]})]})]})}),C&&e.jsx("div",{className:"max-w-4xl mx-auto absolute top-40 left-0 right-0 flex",children:e.jsxs("div",{children:[e.jsx(Q,{}),e.jsx("button",{onClick:()=>B(!1),className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-md font-medium transition w-[300px] mt-4 mx-auto",children:"Understand and Will Proceed"})]})})]})};export{me as default};
